# Accesibilidad en Angular

La web es utilizada por una amplia variedad de personas, incluidas aquellas que tienen deficiencias visuales o motoras.
Existen diversas tecnologías de asistencia disponibles que facilitan mucho la interacción de estos grupos con aplicaciones de software basadas en la web.
Además, diseñar una aplicación para que sea más accesible generalmente mejora la experiencia del usuario para todos los usuarios.

Para una introducción en profundidad sobre los problemas y técnicas para diseñar aplicaciones accesibles, consulta el curso [Learn Accessibility](https://web.dev/learn/accessibility/) de web.dev de Google.

Esta página aborda las mejores prácticas para diseñar aplicaciones Angular que funcionen bien para todos los usuarios, incluidos aquellos que dependen de tecnologías de asistencia.

## Atributos de accesibilidad

<!-- TODO: add link once attribute binding guide is implemented -->
Construir experiencias web accesibles a menudo implica establecer [atributos de Aplicaciones de Internet Enriquecidas Accesibles (ARIA)](https://web.dev/learn/accessibility/aria-html/) para proporcionar significado semántico donde de otro modo podría faltar.
Usa la sintaxis de plantilla de enlace de atributo para controlar los valores de los atributos relacionados con la accesibilidad.

Al enlazar a atributos ARIA en Angular, debes usar el prefijo `attr.`. La especificación ARIA depende específicamente de atributos HTML en lugar de propiedades de elementos DOM.

<docs-code language="html">
<!-- Usa attr. al enlazar a un atributo ARIA -->
<button [attr.aria-label]="myActionLabel">…</button>
</docs-code>

NOTA: Esta sintaxis solo es necesaria para *enlaces* de atributo.
Los atributos ARIA estáticos no requieren sintaxis adicional.

<docs-code language="html">
<!-- Los atributos ARIA estáticos no requieren sintaxis adicional -->
<button aria-label="Save document">…</button>
</docs-code>

ÚTIL: Por convención, los atributos HTML usan nombres en minúsculas (`tabindex`), mientras que las propiedades usan nombres en camelCase (`tabIndex`).

<!-- TODO: add link once attribute binding guide implemented -->
Consulta la [guía de sintaxis de enlace](guide/templates) para más información sobre la diferencia entre atributos y propiedades.

## Componentes UI de Angular

La biblioteca [Angular Material](https://material.angular.dev), que es mantenida por el equipo de Angular, es un conjunto de componentes UI reutilizables que busca ser completamente accesible.
El [Component Development Kit (CDK)](https://material.angular.dev/cdk/categories) incluye el paquete `a11y` que proporciona herramientas para soportar diversas áreas de accesibilidad.
Por ejemplo:

* `LiveAnnouncer` se usa para anunciar mensajes para usuarios de lectores de pantalla usando una región `aria-live`.
    Consulta la documentación de W3C para más información sobre [regiones aria-live](https://www.w3.org/WAI/PF/aria-1.1/states_and_properties#aria-live).

* La directiva `cdkTrapFocus` atrapa el foco de la tecla Tab dentro de un elemento.
    Úsala para crear experiencias accesibles para componentes como diálogos modales, donde el foco debe estar restringido.

Para detalles completos de estas y otras herramientas, consulta la [visión general de accesibilidad de Angular CDK](https://material.angular.dev/cdk/a11y/overview).

### Aumentando elementos nativos

Los elementos HTML nativos capturan varios patrones de interacción estándar que son importantes para la accesibilidad.
Al crear componentes de Angular, debes reutilizar estos elementos nativos directamente cuando sea posible, en lugar de reimplementar comportamientos bien soportados.

Por ejemplo, en lugar de crear un elemento personalizado para una nueva variedad de botón, crea un componente que use un selector de atributo con un elemento `<button>` nativo.
Esto se aplica más comúnmente a `<button>` y `<a>`, pero puede usarse con muchos otros tipos de elementos.

Puedes ver ejemplos de este patrón en Angular Material:
[`MatButton`](https://github.com/angular/components/blob/main/src/material/button/button.ts#L33C3-L36C5), [`MatTabNav`](https://github.com/angular/components/blob/main/src/material/tabs/tab-nav-bar/tab-nav-bar.ts#L62), y [`MatTable`](https://github.com/angular/components/blob/main/src/material/table/table.ts#L40).

### Usando contenedores para elementos nativos

A veces, usar el elemento nativo apropiado requiere un elemento contenedor.
Por ejemplo, el elemento nativo `<input>` no puede tener hijos, por lo que cualquier componente personalizado de entrada de texto necesita envolver un `<input>` con elementos adicionales.
Al simplemente incluir `<input>` en la plantilla de tu componente personalizado, es imposible para los usuarios de tu componente establecer propiedades y atributos arbitrarios al elemento `<input>`.
En su lugar, crea un componente contenedor que use proyección de contenido para incluir el control nativo en la API del componente.

Puedes ver [`MatFormField`](https://material.angular.dev/components/form-field/overview) como ejemplo de este patrón.

## Caso de estudio: Construyendo una barra de progreso personalizada

El siguiente ejemplo muestra cómo hacer accesible una barra de progreso usando host binding para controlar atributos relacionados con la accesibilidad.

* El componente define un elemento habilitado para accesibilidad con tanto el atributo HTML estándar `role`, como atributos ARIA.
    El atributo ARIA `aria-valuenow` está enlazado a la entrada del usuario.
* En la plantilla, el atributo `aria-label` asegura que el control sea accesible para lectores de pantalla.

<docs-code-multifile>
  <docs-code
    path="adev/src/content/examples/accessibility/src/app/progress-bar.component.ts"
    language="ts"
    linenums
    highlight="[12, 20]"/>
  <docs-code
    path="adev/src/content/examples/accessibility/src/app/app.component.html"
    language="html"
    linenums
    highlight="[8, 9]"/>
</docs-code-multifile>

## Enrutamiento

### Gestión del foco después de la navegación

Rastrear y controlar el [foco](https://web.dev/learn/accessibility/focus/) en una UI es una consideración importante al diseñar para accesibilidad.
Al usar el enrutamiento de Angular, debes decidir dónde va el foco de la página al navegar.

Para evitar depender únicamente de señales visuales, necesitas asegurarte de que tu código de enrutamiento actualice el foco después de la navegación de la página.
Usa el evento `NavigationEnd` del servicio `Router` para saber cuándo actualizar el foco.

El siguiente ejemplo muestra cómo encontrar y enfocar el encabezado de contenido principal en el DOM después de la navegación.

<docs-code language="typescript">

router.events.pipe(filter(e => e instanceof NavigationEnd)).subscribe(() => {
  const mainHeader = document.querySelector('#main-content-header')
  if (mainHeader) {
    mainHeader.focus();
  }
});

</docs-code>

En una aplicación real, el elemento que recibe el foco depende de la estructura y diseño específicos de tu aplicación.
El elemento enfocado debe poner a los usuarios en una posición para moverse inmediatamente al contenido principal que acaba de ser enrutado a la vista.
Debes evitar situaciones donde el foco regresa al elemento `body` después de un cambio de ruta.

### Identificación de enlaces activos

Las clases CSS aplicadas a elementos `RouterLink` activos, como `RouterLinkActive`, proporcionan una señal visual para identificar el enlace activo.
Desafortunadamente, una señal visual no ayuda a usuarios ciegos o con deficiencia visual.
Aplicar el atributo `aria-current` al elemento puede ayudar a identificar el enlace activo.
Para más información, consulta [Mozilla Developer Network (MDN) aria-current](https://developer.mozilla.org/docs/Web/Accessibility/ARIA/Attributes/aria-current)).

La directiva `RouterLinkActive` proporciona la entrada `ariaCurrentWhenActive` que establece el `aria-current` a un valor especificado cuando el enlace se vuelve activo.

El siguiente ejemplo muestra cómo aplicar la clase `active-page` a los enlaces activos así como establecer su atributo `aria-current` a `"page"` cuando están activos:

```angular-html
<nav>
  <a routerLink="home"
      routerLinkActive="active-page"
      ariaCurrentWhenActive="page">
    Home
  </a>
  <a routerLink="about"
      routerLinkActive="active-page"
      ariaCurrentWhenActive="page">
    About
  </a>
  <a routerLink="shop"
      routerLinkActive="active-page"
      ariaCurrentWhenActive="page">
    Shop
  </a>
</nav>
```

<!-- vale Angular.Angular_Spelling = NO -->

## Más información

* [Accessibility - Google Web Fundamentals](https://developers.google.com/web/fundamentals/accessibility)
* [ARIA specification and authoring practices](https://www.w3.org/TR/wai-aria)
* [Material Design - Accessibility](https://material.io/design/usability/accessibility.html)
* [Smashing Magazine](https://www.smashingmagazine.com/search/?q=accessibility)
* [Inclusive Components](https://inclusive-components.design)
* [Accessibility Resources and Code Examples](https://dequeuniversity.com/resources)
* [W3C - Web Accessibility Initiative](https://www.w3.org/WAI/people-use-web)
* [Rob Dodson A11ycasts](https://www.youtube.com/watch?v=HtTyRajRuyY)
* [Angular ESLint](https://github.com/angular-eslint/angular-eslint#functionality) proporciona reglas de linting que pueden ayudarte a asegurarte de que tu código cumpla con los estándares de accesibilidad.

<!-- vale Angular.Angular_Spelling = YES -->

Libros

<!-- vale Angular.Google_Quotes = NO -->

* "A Web for Everyone: Designing Accessible User Experiences," Sarah Horton and Whitney Quesenbery
* "Inclusive Design Patterns," Heydon Pickering

<!-- vale Angular.Google_Quotes = YES -->
